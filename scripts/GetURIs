#!/usr/bin/env ruby

require 'socket'
require 'yaml'

load "#{ENV['HOME']}/.config/nautilus/save_tabs"

uri = ENV['NAUTILUS_SCRIPT_CURRENT_URI']
selected_uris = ENV['NAUTILUS_SCRIPT_SELECTED_URIS']

UNIXSocket.open(SOCKET_PATH) do |sock|
  sock.write(YAML.dump([uri, selected_uris]))
end
